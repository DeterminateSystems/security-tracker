dist: trusty

sudo: required

env: ARCH_TRAVIS_CLEAN_CHROOT=1

arch:

  packages:
    - python
    - python-pytest
    - python-pytest-cov
    - python-sqlalchemy
    - python-flask
    - python-flask-sqlalchemy
    - python-flask-wtf
    - python-flask-login
    - python-flask-talisman
    - python-requests
    - python-scrypt
    - pyalpm
    - sqlite
    - expac

  script:
    - python3 -m py_compile $(git ls-files '*.py')
    - make test

script: 'curl -s https://raw.githubusercontent.com/mikkeloscar/arch-travis/master/arch-travis.sh | bash'

notifications:
  irc:
    channels:
      - 'ircs://chat.freenode.net:7070/#archlinux-security'
    template:
      - "[%{repository_name}] %{result} %{branch} %{commit} %{author}: %{commit_subject}"
      - "Change view : %{compare_url}"
      - "Build details : %{build_url}"
    on_success: always
    on_failure: always
    use_notice: false
    skip_join: false

# vim: ft=yaml ts=2 sw=2 et:
